policy_version: 1

allowed_dirs:
  - 'src/**'
  - 'test/**'
  - 'tools/**'
  - '.claude/**'

allowed_files:
  - '.github/workflows/ci.yml'
  - '.github/workflows/policy-gate.yml'
  - '.github/ISSUE_TEMPLATE/ai-issue.md'
  - '.github/PULL_REQUEST_TEMPLATE.md'
  - '.github/labels.yml'
  - 'README.md'
  - 'CLAUDE.md'

hard_gate:
  - 'policy.yml'
  - 'tools/policy-gate.js'
  - '.github/workflows/**'
  - 'migrations/**'
  - 'ddl/**'

soft_gate:
  deps:
    - 'package.json'
    - 'package-lock.json'
    - 'pnpm-lock.yaml'
    - 'yarn.lock'
    - 'pom.xml'
    - 'build.gradle'
    - 'build.gradle.kts'
    - 'gradle.properties'
  config:
    - '*.yml'
    - '*.yaml'
    - '*.properties'
    - 'config/**/*.yml'
    - 'config/**/*.yaml'
    - 'config/**/*.properties'

limits:
  max_files_changed: 10
  max_diff_lines: 300
  max_new_files: 3
  max_deleted_files: 1

bootstrap:
  allow_workflows: true
  allowed_dirs_extra:
    - '.github/workflows/**'
  limits:
    max_files_changed: 20
    max_diff_lines: 1000
    max_new_files: 10
    max_deleted_files: 5
